plugins {
  // For building the final jar
  id 'com.github.johnrengelman.shadow' version '5.2.0'
  // For annotation processing
  id 'net.ltgt.apt' version '0.21'
  id 'java'
  id 'idea'
}

sourceSets {
  main {
    java {
      srcDirs = ['src/jmh/java']
    }
  }
}

jar {
  manifest {
    attributes 'Main-Class': 'org.openjdk.jmh.Main'
  }
}

repositories {
  jcenter()
  mavenCentral()
}

shadowJar {
  baseName = 'benchmarks'
  classifier = null
  version = null
}

dependencies {
  compile 'org.json:json:20190722'
  compile 'net.time4j:time4j-core:4.38'
  compile 'org.apache.commons:commons-lang3:3.9'
  compile 'org.openjdk.jmh:jmh-core:1.22'
  annotationProcessor 'org.openjdk.jmh:jmh-generator-annprocess:1.22'
}

// Running `./gradlew` runs these tasks by default
defaultTasks 'clean', 'shadowJar'

sourceCompatibility = 1.8
targetCompatibility = 1.8